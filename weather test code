

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.HashMap;



public class HTTP_URL_JSON_Test {
  
	HTTP_URL_JSON_Test(){
		
		String currentcondition = "";
		//String longitude = "-111.7889";
		//String gastype = "reg";
		//String sortType = "price";
		String api = "fqdenqevfzd2bdd53bcw4pp3";
		String url = "http://api.worldweatheronline.com/free/v1/weather.ashx?q=83440&format=json&num_of_days=1&date=tomorrow&cc=no&show_comments=no&key=fqdenqevfzd2bdd53bcw4pp3";
		String json = new String();
		System.out.println("TEST");
		int timeout = 500;
		int status;

		try {
			URL u = new URL(url);
			HttpURLConnection c = (HttpURLConnection) u.openConnection();
			c.setRequestMethod("GET");
			c.setRequestProperty("Content-length", "0");
			c.setUseCaches(false);
			c.setAllowUserInteraction(false);
			c.setConnectTimeout(timeout);
			c.connect();
			status = c.getResponseCode();

			switch (status){
			case 200:
			case 201:
				BufferedReader br = new BufferedReader(new InputStreamReader(c.getInputStream()));
				StringBuilder sb = new StringBuilder();
				String line;
				while ((line = br.readLine()) != null) {
					sb.append(line+"\n");
				}
				br.close();
				json = sb.toString();
			}
		} 
		catch (MalformedURLException e) {
			// TODO Auto-generated catch block
			System.out.println("Bad URL");
			e.printStackTrace();
		} 
		catch (IOException e) {
			// TODO Auto-generated catch block
			System.out.println("IOException");
			e.printStackTrace();

		}
		System.out.println(url);
		System.out.println(json);

//		try{
//			HashMap aMap = (HashMap) JSONUtilities.parse(json);
//
//			String country = (String)aMap.get("country");
//			String zip = (String)aMap.get("zip");
//			float price = (float)aMap.get("price");
//			String date = (String)aMap.get("date");
//			String address = (String)aMap.get("address");
//			String diesel = (String)aMap.get("diesel");
//			int id = (int)aMap.get("id");
//			float lat = (float)aMap.get("lat");
//			float lng = (float)aMap.get("lng");
//			String station = (String)aMap.get("station");
//			String region = (String)aMap.get("region");
//			String city = (String)aMap.get("city");
//			String distance = (String)aMap.get("distance");
//
//		} catch (JSONException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		}
	}
}
